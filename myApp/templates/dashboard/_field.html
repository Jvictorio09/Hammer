{% load form_extras %}
 <div>
   {% if field.label %}
     <label class="block text-sm font-medium mb-1 text-gray-800" for="id_{{ field.name }}">
       {{ field.label }}{% if required %}<span class="text-red-500"> *</span>{% endif %}
     </label>
   {% endif %}
 
   {# Swap to textarea if requested #}
   {% if input_type == "textarea" %}
     <textarea
       id="id_{{ field.name }}"
       name="{{ field.name }}"
       rows="{{ rows|default:'4' }}"
       placeholder="{{ placeholder }}"
       class="w-full rounded-xl border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900/10 focus:border-gray-400 transition">{{ field.value|default_if_none:'' }}</textarea>
   {% else %}
     {{ field|add_class:"w-full rounded-xl border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900/10 focus:border-gray-400 transition" }}
     {% if placeholder %}<script>document.getElementById('id_{{ field.name }}')?.setAttribute('placeholder', '{{ placeholder|escapejs }}');</script>{% endif %}
     {% if input_mode %}<script>document.getElementById('id_{{ field.name }}')?.setAttribute('inputmode', '{{ input_mode }}');</script>{% endif %}
     {% if data_counter %}<script>document.getElementById('id_{{ field.name }}')?.setAttribute('data-counter', '{{ data_counter }}');</script>{% endif %}
   {% endif %}
 
   {% if field.help_text %}
     <p class="mt-1 text-xs text-gray-500">{{ field.help_text }}</p>
   {% elif help %}
     <p class="mt-1 text-xs text-gray-500">{{ help }}</p>
   {% endif %}
 
   {% for err in field.errors %}
     <p class="mt-1 text-sm text-red-600">{{ err }}</p>
   {% endfor %}
 </div>
 