{% extends "base.html" %}
{% load static %}
{% load textutils %}


{% block title %}About Hammer | Design & Build in Dubai{% endblock %}

{% block extra_head %}
  <meta name="description" content="Hammer is a Dubai-based design & build company delivering premium landscapes, interiors, joinery, marble and facility management. One accountable team, clear milestones, on-time handover.">
  <link rel="canonical" href="{{ request.build_absolute_uri|cut:'?' }}">
  <meta property="og:title" content="About Hammer | Design & Build in Dubai">
  <meta property="og:description" content="Premium design & build across the UAE — landscapes, interiors, joinery, marble and facility management.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://picsum.photos/1200/630?random=8501">

  <style>
    :root{
      --ink:#0B0E14; --ink2:#121722; --bg:#ffffff; --teal:#18AFAB; --muted:#6B7280; --ring:rgba(24,175,171,.18);
      --radius:16px; --shadow:0 12px 28px rgba(0,0,0,.10);
    }
    /* Utilities */
    .container{max-width:72rem;margin-inline:auto;padding-inline:1.5rem}
    .chip{display:inline-flex;align-items:center;gap:.5rem;padding:.35rem .7rem;border-radius:999px;background:#f5f5f5;font-size:.8rem;color:#374151}
    .card{border:1px solid rgba(0,0,0,.06);border-radius:var(--radius);background:#fff;box-shadow:0 0 0 0 rgba(0,0,0,0);transition:.25s}
    .card:hover{box-shadow:var(--shadow);border-color:var(--ring)}
    .eyebrow{letter-spacing:.45em;text-transform:uppercase;font-size:.65rem;color:var(--teal)}
    .section{padding-block:4rem}
    .h1{font-weight:800;font-size:clamp(1.875rem,2.5vw + 1rem,3rem);line-height:1.15}
    .h2{font-weight:800;font-size:clamp(1.5rem,1.2vw + 1rem,2rem)}
    .lead{color:#ffffffcc}
    .sub{color:var(--muted)}
    .grid{display:grid;gap:1rem}
    @media(min-width:640px){.grid-sm-2{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:1024px){.grid-lg-3{grid-template-columns:repeat(3,minmax(0,1fr))}}
    @media(min-width:1280px){.grid-xl-4{grid-template-columns:repeat(4,minmax(0,1fr))}}

    /* Hero */
     /* Background image + overlay for .hero */
  .hero{
    position: relative;
    isolation: isolate;                 /* keeps overlays inside */
    min-height: 52vh;                   /* tweak as you like */
    display: grid;
    align-items: center;
    color: #fff;                        /* white text on image */
    --hero-img: url("{{ hero_image_url|default:'https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=2000&auto=format&fit=crop' }}");
  }
  .hero::before{
    content:"";
    position:absolute; inset:0; z-index:-2;
    background-image: var(--hero-img);
    background-size: cover;
    background-position: center center; /* try 'center 35%' if you need a focal point */
    background-repeat: no-repeat;
    filter: none;
    transform: scale(1.02);             /* tiny zoom to avoid edge gaps on mobile */
  }
  .hero::after{
    content:"";
    position:absolute; inset:0; z-index:-1;
    /* soft vignette: darker at bottom for copy legibility */
    background: radial-gradient(120% 90% at 50% 10%, rgba(0,0,0,.15) 0%, rgba(0,0,0,.35) 60%, rgba(0,0,0,.55) 100%);
    /* if your image is already dark, reduce the final stop to .45 */
  }

  /* Optional: taller hero on desktop */
  @media (min-width: 1024px){
    .hero{ min-height: 64vh; }
  }

  /* Respect users who prefer less motion (disables the tiny zoom) */
  @media (prefers-reduced-motion: reduce){
    .hero::before{ transform:none; }
  }

  /* Utility bits you already use */
  .hero .container{ max-width: 72rem; margin-inline:auto; padding: 4.5rem 1.5rem; }
  .eyebrow{ letter-spacing:.45em; text-transform:uppercase; color:#18AFAB; font-size:.62rem }
  .h1{ font-weight:800; font-size:clamp(2rem, 4vw + 1rem, 3rem); line-height:1.1; }
  .lead{ color:#e5e7eb; }
  .chips{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:1rem }
  .chip{ background:rgba(255,255,255,.12); color:#fff; border:1px solid rgba(255,255,255,.18); padding:.4rem .7rem; border-radius:999px; font-size:.8rem; backdrop-filter:saturate(120%) blur(4px) }

    /* Metrics */
    .metric{padding:1.25rem;text-align:center}
    .metric .num{color:var(--teal);font-weight:800;font-size:1.75rem}
    .metric .lbl{color:#4B5563}

    /* Services list */
    .svc{padding:1.25rem;display:flex;gap:.75rem}
    .svc-ico{width:2.5rem;height:2.5rem;border-radius:12px;display:grid;place-items:center;background:rgba(24,175,171,.10);color:var(--teal);flex:0 0 auto}

    /* Values */
    .value{padding:1.25rem;border-radius:var(--radius);background:#0f1320;border:1px solid rgba(255,255,255,.08)}

    /* Process tiles (2 → 4) */
    .process-tile{position:relative;padding-top:2rem}
    .process-num{position:absolute;inset-inline:0;top:.25rem;margin:auto;width:2.25rem;height:2.25rem;border-radius:999px;
                 display:grid;place-items:center;background:var(--ink);color:#fff;font-weight:700;font-size:.85rem;box-shadow:var(--shadow)}
    .process-card{border-radius:var(--radius);border:1px solid rgba(255,255,255,.08);background:#121722;padding:1.25rem}
    .process-ico{width:2.25rem;height:2.25rem;border-radius:10px;background:#ffffff14;display:grid;place-items:center;margin-bottom:.5rem;color:#fff}

    /* Leaders carousel */
    .carousel-wrap{position:relative}
    .carousel{display:flex;gap:1rem;overflow:auto;scroll-snap-type:x mandatory;scrollbar-width:none;padding-bottom:.25rem}
    .carousel::-webkit-scrollbar{display:none}
    .slide{scroll-snap-align:center;flex:0 0 78%;max-width:78%}
    @media(min-width:640px){.slide{flex-basis:48%;max-width:48%}}
    @media(min-width:1024px){.slide{flex-basis:31%;max-width:31%}}
    @media(min-width:1280px){.slide{flex-basis:24%;max-width:24%}}
    .lead-card{overflow:hidden}
    .lead-img{width:100%;aspect-ratio:4/3;object-fit:cover}
    .car-btn{position:absolute;top:40%;transform:translateY(-50%);width:42px;height:42px;border-radius:999px;border:1px solid rgba(0,0,0,.08);
             background:#fff;display:grid;place-items:center;box-shadow:var(--shadow)}
    .car-prev{left:-6px}
    .car-next{right:-6px}
    @media(min-width:640px){.car-prev{left:-12px}.car-next{right:-12px}}

    /* Timeline list */
    .tick{width:8px;height:8px;border-radius:999px;background:var(--teal);margin-top:.35rem}

    /* CTA */
    .cta{border-radius:20px;background:var(--ink2);color:#fff;border:1px solid rgba(255,255,255,.08);padding:1.5rem}
    .cta .btn{display:inline-flex;align-items:center;gap:.5rem;border-radius:999px;background:var(--teal);color:#fff;padding:.75rem 1rem;font-weight:600}
  </style>
{% endblock %}

{% block content %}

<!-- HERO -->
<section class="hero hero--image grain" aria-label="About Hammer hero"
         style="--hero-img: url('{{ hero_image_url|default:"https://images.unsplash.com/photo-1493666438817-866a91353ca9?q=80&w=2000&auto=format&fit=crop" }}');">
  <div class="hero__overlay"></div>
  <div class="container hero__inner">
    <p class="eyebrow">About Hammer</p>
    <h1 class="h1" style="margin-top:.5rem">Design & Build, done properly.</h1>
    <p class="lead" style="margin-top:1rem;max-width:48ch">
      We create spaces that live beautifully — from quiet-luxury landscapes and interiors to bespoke joinery, marble, and aftercare.
      One accountable team. Clear milestones. On-time handover.
    </p>
    <div class="chips">
      <span class="chip">Dubai • UAE</span>
      <span class="chip">Residential & Commercial</span>
      <span class="chip">Concept → Aftercare</span>
    </div>
  </div>
</section>

<style>
  :root{
    --ink:#0B0E14;
    --teal:#18AFAB;
  }

  .hero{
    position:relative; overflow:hidden; color:#fff;
    min-height:62vh; display:grid; place-items:end; /* text sits near bottom */
    background:#0b0e14; /* safe fallback */
  }
  @media (min-width:768px){ .hero{ min-height:78vh } }

  /* background via CSS variable */
  .hero--image{ 
    background-image: var(--hero-img);
    background-size:cover; background-position:center;
    will-change:transform;
  }

  /* overlay for legibility (L→R gradient + soft vignette) */
  .hero__overlay{
    position:absolute; inset:0; pointer-events:none;
    background:
      radial-gradient(120% 80% at 50% 20%, rgba(0,0,0,.35), transparent 55%),
      linear-gradient(90deg, rgba(0,0,0,.75), rgba(0,0,0,.35) 45%, rgba(0,0,0,.08) 70%, transparent);
  }

  /* gentle texture for sophistication */
  .grain::before{
    content:""; position:absolute; inset:0; mix-blend-mode:overlay; opacity:.07; pointer-events:none;
    background-image:url('https://www.transparenttextures.com/patterns/white-diamond.png');
  }

  .hero__inner{
    position:relative; z-index:1; width:100%;
    padding:3.5rem 1.5rem; /* tighter on mobile */
  }
  @media (min-width:768px){
    .hero__inner{ padding:5rem 1.5rem }
  }
  .hero .eyebrow{ letter-spacing:.45em; text-transform:uppercase; color:var(--teal); font-size:.7rem }

  /* entrance animation (respect reduced motion) */
  @media (prefers-reduced-motion:no-preference){
    .hero{ opacity:0; transform: translateY(10px); }
    .hero.is-in{ opacity:1; transform:none; transition: opacity .7s cubic-bezier(.22,1,.36,1), transform .7s cubic-bezier(.22,1,.36,1); }
    .hero--image{ background-position:center 12px; transition: background-position .7s cubic-bezier(.22,1,.36,1); }
    .hero.is-in.hero--image{ background-position:center 0; }
  }

  /* optional: very subtle parallax on scroll */
  @media (prefers-reduced-motion:no-preference){
    .hero[data-parallax="1"]{ will-change:background-position; }
  }
</style>

<script>
  (function(){
    const hero = document.currentScript.previousElementSibling.previousElementSibling; // the <section>
    if(!hero) return;

    // reveal on view
    const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(prefersReduced || !('IntersectionObserver' in window)){
      hero.classList.add('is-in');
    } else {
      const io = new IntersectionObserver((entries, obs)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){ hero.classList.add('is-in'); obs.unobserve(hero); }
        });
      }, {threshold:.2});
      io.observe(hero);
    }

    // subtle parallax (background-position) — safe & GPU-friendly
    hero.dataset.parallax = '1';
    const onScroll = ()=>{
      const r = hero.getBoundingClientRect();
      const vh = window.innerHeight || 0;
      const vis = 1 - Math.min(1, Math.max(0, (r.top + r.height*0.2)/ (vh + r.height*0.2)));
      const offset = Math.round(vis * 14); // 0→14px
      hero.style.backgroundPosition = `center ${offset}px`;
    };
    if(!prefersReduced){
      window.addEventListener('scroll', onScroll, {passive:true});
      window.addEventListener('resize', onScroll);
      onScroll();
    }
  })();
</script>


{% include "partials/stats.html" %}
<!-- VALUES -->
<section class="section principles" style="background:#0F1117;color:#fff">
  <div class="container">
    <header class="pr-head">
      <p class="eyebrow">Principles</p>
      <h2 class="h2">How we work</h2>
    </header>

    <div class="pr-grid">
      {% for v in values %}
        <article class="pr-card pr-reveal">
          <div class="pr-icon">
            {% if v.icon %}<i class="{{ v.icon }}"></i>{% else %}<i class="fa-solid fa-circle-check"></i>{% endif %}
          </div>
          <h3 class="pr-title">{{ v.title }}</h3>
          <p class="pr-body">{{ v.body }}</p>
        </article>
      {% empty %}
        <!-- tasteful fallbacks -->
        <article class="pr-card pr-reveal">
          <div class="pr-icon"><i class="fa-solid fa-gem"></i></div>
          <h3 class="pr-title">Craft over speed</h3>
          <p class="pr-body">Every junction resolved. Every finish considered. No shortcuts.</p>
        </article>
        <article class="pr-card pr-reveal">
          <div class="pr-icon"><i class="fa-solid fa-diagram-project"></i></div>
          <h3 class="pr-title">Transparent cadence</h3>
          <p class="pr-body">Fixed milestones, weekly reporting, zero surprises.</p>
        </article>
        <article class="pr-card pr-reveal">
          <div class="pr-icon"><i class="fa-solid fa-shield-halved"></i></div>
          <h3 class="pr-title">Safety & privacy</h3>
          <p class="pr-body">Clean sites, protected data, and authority approvals handled.</p>
        </article>
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .pr-head{ margin-bottom:1.25rem; position:relative; }
  .pr-head:after{
    content:""; display:block; height:1px; margin-top:1rem;
    background:linear-gradient(90deg, rgba(255,255,255,.08), rgba(24,175,171,.35), rgba(255,255,255,.08));
  }

  /* grid: 1 → 2 → 3 */
  .pr-grid{
    display:grid; gap:1rem;
    grid-template-columns:repeat(1,minmax(0,1fr));
  }
  @media (min-width:640px){ .pr-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
  @media (min-width:1024px){ .pr-grid{ grid-template-columns:repeat(3,minmax(0,1fr)); } }

  .pr-card{
    border-radius:16px;
    background:linear-gradient(180deg,#121722,#0F1117);
    border:1px solid rgba(255,255,255,.08);
    padding:1rem;
    transition: transform .25s cubic-bezier(.22,1,.36,1), box-shadow .25s, border-color .25s;
  }
  .pr-card:hover{
    transform:translateY(-2px);
    box-shadow:0 18px 36px rgba(0,0,0,.35), 0 0 0 1px rgba(24,175,171,.20) inset;
    border-color:rgba(24,175,171,.35);
  }

  .pr-icon{
    width:44px; height:44px; border-radius:12px; margin-bottom:.6rem;
    display:flex; align-items:center; justify-content:center;
    background:rgba(255,255,255,.06); color:#18AFAB;
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
  }
  .pr-title{ font-weight:700; line-height:1.25; }
  .pr-body{ margin-top:.45rem; color:#cbd5e1; line-height:1.55; }

  /* staggered reveal */
  .pr-reveal{ opacity:0; transform:translateY(12px); }
  .pr-reveal.is-in{ opacity:1; transform:none; transition:opacity .6s cubic-bezier(.22,1,.36,1), transform .6s cubic-bezier(.22,1,.36,1); }
  @media (prefers-reduced-motion: reduce){
    .pr-reveal{ opacity:1; transform:none; }
  }
</style>

<script>
  // Minimal staggered entrance
  (function(){
    const cards = document.querySelectorAll('.pr-reveal');
    if(!cards.length) return;
    if(!('IntersectionObserver' in window) || matchMedia('(prefers-reduced-motion: reduce)').matches){
      cards.forEach(c => c.classList.add('is-in'));
      return;
    }
    const io = new IntersectionObserver((entries, obs)=>{
      entries.forEach((e, i)=>{
        if(e.isIntersecting){
          e.target.style.transitionDelay = (i * 60) + 'ms';
          e.target.classList.add('is-in');
          obs.unobserve(e.target);
        }
      });
    }, { threshold: .15 });
    cards.forEach(c => io.observe(c));
  })();
</script>

<section id="svcShowcase" class="section relative">
  <style>
    #svcShowcase{
      --ink:#0B0E14; --muted:#6b7280; --ring:#EAEDF0; --bg:#fff; --teal:#18AFAB;
      --card:#ffffff; --shadow:0 20px 50px rgba(8,15,35,.08);
      --radius:18px;
    }
    #svcShowcase .wrap{max-width:1200px;margin:0 auto;padding:3.2rem 1.2rem}
    #svcShowcase .head{text-align:center;margin-bottom:1.8rem}
    #svcShowcase .eyebrow{
      display:inline-flex;align-items:center;gap:.5rem;
      padding:.35rem .7rem;border-radius:999px;background:#f2f5f7;color:#3b4552;
      font-size:.78rem;font-weight:700;letter-spacing:.02em;
    }
    #svcShowcase h2{margin:.7rem 0 .35rem;font-size:clamp(2rem,3.6vw,2.8rem);font-weight:900;color:var(--ink)}
    #svcShowcase .sub{color:#445060;max-width:64ch;margin:0 auto}
    #svcShowcase .grid{display:grid;gap:2.2rem;align-items:start}
    @media (min-width:1100px){#svcShowcase .grid{grid-template-columns:1.05fr 1fr}}
    #svcShowcase .panel{
      position:sticky;top:104px;border-radius:var(--radius);overflow:hidden;background:#f7f9fb;
      box-shadow:var(--shadow);isolation:isolate;
    }
    #svcShowcase .panel::before{
      content:"";position:absolute;inset:0;border-radius:inherit;padding:1px;
      background:linear-gradient(135deg,#e9eef3,rgba(24,175,171,.25));
      -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none;z-index:2;
    }
    #svcShowcase .panel-inner{position:relative;aspect-ratio:4/3}
    #svcShowcase .panel img{
      position:absolute;inset:0;width:100%;height:100%;object-fit:cover;border-radius:inherit;
      transition:opacity .45s ease,transform .45s ease;will-change:opacity,transform;
    }
    #svcShowcase .fade-in{opacity:1;transform:scale(1)}
    #svcShowcase .fade-out{opacity:0;transform:scale(1.02)}
    #svcShowcase .imgFallback{position:absolute;inset:0;display:grid;place-items:center;color:#9aa7b5}
    #svcShowcase .stack{border-radius:var(--radius);background:var(--bg);box-shadow:var(--shadow);overflow:hidden}
    #svcShowcase .row{background:var(--card);position:relative}
    #svcShowcase .row + .row{border-top:1px solid var(--ring)}
    #svcShowcase .btn{
      width:100%;display:flex;align-items:center;justify-content:space-between;gap:1rem;
      padding:1.15rem 1.25rem;border:0;background:transparent;cursor:pointer;text-align:left;
    }
    #svcShowcase .title{display:flex;align-items:center;gap:1rem;color:#0f1720;font-weight:800}
    #svcShowcase .badge{
      width:40px;height:40px;border-radius:12px;border:1px solid var(--ring);display:grid;place-items:center;
      color:#5a6572;background:#fafbfc;
    }
    #svcShowcase .badge i{font-size:1.1rem}
    #svcShowcase .toggle{
      width:32px;height:32px;border-radius:10px;border:1px solid var(--ring);display:grid;place-items:center;
      color:#5a6572;transition:background .2s,color .2s,transform .25s;
    }
    #svcShowcase .row[aria-expanded="true"] .toggle{color:#0f1720}
    #svcShowcase .plus{position:relative;width:14px;height:14px}
    #svcShowcase .plus::before,#svcShowcase .plus::after{
      content:"";position:absolute;left:50%;top:50%;width:2px;height:100%;background:currentColor;border-radius:2px;
      transform:translate(-50%,-50%) rotate(0deg);transition:transform .25s ease
    }
    #svcShowcase .plus::after{transform:translate(-50%,-50%) rotate(90deg)}
    #svcShowcase .row[aria-expanded="true"] .plus::after{transform:translate(-50%,-50%) rotate(0deg)}
    #svcShowcase .panel-body{
      max-height:0;overflow:hidden;transition:max-height .32s ease,opacity .2s ease;
      opacity:.0;padding:0 1.25rem 0 4.45rem;
    }
    #svcShowcase .row[aria-expanded="true"] .panel-body{opacity:1;padding:0 1.25rem 1.1rem 4.45rem}
    #svcShowcase .desc{color:#3b4552;line-height:1.65}
    #svcShowcase .cta{
      display:inline-flex;align-items:center;gap:.5rem;margin-top:.65rem;
      padding:.7rem 1rem;border-radius:12px;border:1px solid var(--ring);
      color:#0f1720;font-weight:800;text-decoration:none;background:#fff;
      box-shadow:0 6px 20px rgba(15,23,32,.06);transition:transform .15s ease, box-shadow .2s ease;
    }
    #svcShowcase .cta:hover{transform:translateY(-1px);box-shadow:0 10px 26px rgba(15,23,32,.08)}
    #svcShowcase .row[aria-expanded="false"] .cta{display:none}
  </style>

  <div class="wrap">
    <header class="head">
      <span class="eyebrow">SERVICES</span>
      <h2>What we do</h2>
      <p class="sub">Find out which one of our services fit the needs of your project</p>
    </header>

    <div class="grid">
      <!-- Left sticky image -->
      <aside class="panel">
        <div class="panel-inner">
          {% with first=services_db|first %}
            {% if first and first.first_media_url %}
              <img id="svcImgA" class="fade-in" src="{{ first.first_media_url }}" alt="{{ first.title }}"
                   loading="eager" fetchpriority="high" sizes="(min-width:1100px) 620px, 92vw">
            {% else %}
              <div id="svcImgA" class="imgFallback">No image yet</div>
            {% endif %}
          {% endwith %}
          <img id="svcImgB" class="fade-out" src="" alt="" style="opacity:0">
        </div>
      </aside>

      <!-- Right accordion -->
      <div class="stack" id="svcAcc">
        {% for s in services_db %}
          {% firstof s.hero_subcopy s.pinned_body_1 s.pinned_body_2 "We’ll tailor this service to your budget, timeline and taste." as svc_desc %}
          <div class="row"
               data-img="{{ s.first_media_url|default:'' }}"
               data-title="{{ s.title|escape }}"
               aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}">
            <button class="btn" type="button" aria-controls="svc-pane-{{ forloop.counter }}">
              <span class="title">
                <span class="badge"><i class="{{ s.first_icon_class|default:'fa-solid fa-layer-group' }}"></i></span>
                {{ s.title }}
              </span>
              <span class="toggle"><span class="plus"></span></span>
            </button>

            <div id="svc-pane-{{ forloop.counter }}" class="panel-body"
                 style="{% if forloop.first %}max-height:420px{% endif %}">
              {% if svc_desc %}
                <p class="desc">{{ svc_desc|striptags|truncatechars:260 }}</p>
              {% endif %}
              <a class="cta" href="{% url 'service_detail' s.slug %}">
                Explore service →
              </a>
            </div>
          </div>
        {% empty %}
          <div class="row"><div class="panel-body" style="max-height:none;padding:1rem">No active services yet.</div></div>
        {% endfor %}
      </div>
    </div>
  </div>

  <script>
  (function(){
    const acc  = document.getElementById('svcAcc');
    const rows = acc ? [...acc.querySelectorAll('.row')] : [];
    const imgA = document.getElementById('svcImgA');
    const imgB = document.getElementById('svcImgB');
    if (!acc || !rows.length || !imgA) return;

    rows.forEach(r => { const s=r.dataset.img; if(s){ const i=new Image(); i.src=s; } });

    function setMaxHeight(body, expand){
      if(!body) return;
      body.style.maxHeight = expand ? (body.scrollHeight + 'px') : '0px';
    }
    function swapImage(src, alt){
      if(!src || !(imgA instanceof HTMLImageElement) || !(imgB instanceof HTMLImageElement)) return;
      const aVisible = imgA.classList.contains('fade-in');
      const top=aVisible?imgB:imgA, bottom=aVisible?imgA:imgB;
      top.src=src; top.alt=alt||''; top.classList.remove('fade-out'); top.classList.add('fade-in');
      bottom.classList.remove('fade-in'); bottom.classList.add('fade-out');
    }

    rows.forEach(row=>{
      const btn=row.querySelector('.btn');
      const body=row.querySelector('.panel-body');
      btn.addEventListener('click',()=>{
        const isOpen=row.getAttribute('aria-expanded')==='true';
        rows.forEach(r=>{
          if(r!==row){
            r.setAttribute('aria-expanded','false');
            setMaxHeight(r.querySelector('.panel-body'), false);
          }
        });
        row.setAttribute('aria-expanded', String(!isOpen));
        setMaxHeight(body, !isOpen);
        if(!isOpen){
          const src=row.dataset.img, alt=row.dataset.title||''; if(src) swapImage(src, alt);
        }
      });
    });

    window.addEventListener('resize',()=>{
      rows.forEach(r=>{
        if(r.getAttribute('aria-expanded')==='true'){
          setMaxHeight(r.querySelector('.panel-body'), true);
        }
      });
    });
  })();
  </script>
</section>





<!-- PROCESS (2 → 4 tiles) -->
<!-- PROCESS (2 → 4 tiles) -->
<section class="section" style="background:var(--ink2);color:#fff">
  <div class="container">
    <header style="margin-bottom:1rem">
      <p class="eyebrow">Delivery</p>
      <h2 class="h2">Fixed milestones. Transparent cadence.</h2>
    </header>

    <style>
      /* container rail (wide screens only) */
      .proc-grid{ position:relative; }
      @media (min-width:1280px){
        .proc-grid::before{
          content:""; position:absolute; left:0; right:0; top:1.75rem; height:2px;
          background:linear-gradient(90deg, rgba(255,255,255,.14), rgba(24,175,171,.45), rgba(255,255,255,.14));
          opacity:.55;
        }
      }

      .process-tile{ position:relative; padding-top:2rem; }
      .process-num{
        position:absolute; inset-inline:0; top:.2rem; margin:auto;
        width:2.4rem; height:2.4rem; border-radius:999px; display:grid; place-items:center;
        font-weight:700; font-size:.85rem; color:#fff;
        background:linear-gradient(180deg,#0f1117,#0b0e14);
        border:1px solid rgba(255,255,255,.12);
        box-shadow:0 10px 24px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
        z-index:2;
      }
      .process-card{
        border-radius:16px; border:1px solid rgba(255,255,255,.08);
        background:#121722; padding:1.15rem;
        transition:transform .28s cubic-bezier(.22,1,.36,1), box-shadow .28s, border-color .28s;
      }
      .process-card:hover{
        transform:translateY(-2px);
        box-shadow:0 18px 36px rgba(0,0,0,.35), 0 0 0 1px rgba(24,175,171,.18) inset;
        border-color:rgba(24,175,171,.28);
      }
      .process-ico{
        width:2.25rem; height:2.25rem; border-radius:10px; display:grid; place-items:center; margin-bottom:.55rem;
        color:#fff; background:rgba(255,255,255,.06); box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
      }

      /* staggered reveal (respects reduced motion) */
      .proc-reveal{ opacity:0; transform:translateY(12px); }
      .proc-reveal.is-in{ opacity:1; transform:none; transition:opacity .6s cubic-bezier(.22,1,.36,1), transform .6s cubic-bezier(.22,1,.36,1); }
      @media (prefers-reduced-motion: reduce){
        .proc-reveal{ opacity:1; transform:none; }
      }
    </style>

    <div class="grid grid-sm-2 grid-xl-4 proc-grid">
      {% if steps %}
        {% for s in steps %}
          <article class="process-tile proc-reveal" aria-label="Process step {{ forloop.counter }}">
            {% with n=s.step_no|default:forloop.counter %}
              <div class="process-num">{{ n|stringformat:"02d" }}</div>
            {% endwith %}
            <div class="process-card">
              <div class="process-ico">
                <i class="{{ s.icon|default:'fa-solid fa-circle-check' }} text-sm"></i>
              </div>
              <h4 style="font-weight:700">{{ s.title }}</h4>
              {% if s.body %}
                <p style="margin-top:.35rem;color:#cbd5e1">{{ s.body }}</p>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      {% else %}
        <!-- tasteful fallback (no template filters / Python calls) -->
        <article class="process-tile proc-reveal" aria-label="Process step 1">
          <div class="process-num">01</div>
          <div class="process-card">
            <div class="process-ico"><i class="fa-solid fa-circle-check text-sm"></i></div>
            <h4 style="font-weight:700">Site study &amp; concept</h4>
          </div>
        </article>

        <article class="process-tile proc-reveal" aria-label="Process step 2">
          <div class="process-num">02</div>
          <div class="process-card">
            <div class="process-ico"><i class="fa-solid fa-circle-check text-sm"></i></div>
            <h4 style="font-weight:700">Permits &amp; technical</h4>
          </div>
        </article>

        <article class="process-tile proc-reveal" aria-label="Process step 3">
          <div class="process-num">03</div>
          <div class="process-card">
            <div class="process-ico"><i class="fa-solid fa-circle-check text-sm"></i></div>
            <h4 style="font-weight:700">Build &amp; logistics</h4>
          </div>
        </article>

        <article class="process-tile proc-reveal" aria-label="Process step 4">
          <div class="process-num">04</div>
          <div class="process-card">
            <div class="process-ico"><i class="fa-solid fa-circle-check text-sm"></i></div>
            <h4 style="font-weight:700">Handover &amp; aftercare</h4>
          </div>
        </article>
      {% endif %}
    </div>
  </div>

  <script>
    // Staggered in-view reveal (per DOM order)
    (function(){
      const cards = document.querySelectorAll('.proc-reveal');
      if(!cards.length) return;

      if(!('IntersectionObserver' in window) || matchMedia('(prefers-reduced-motion: reduce)').matches){
        cards.forEach(c => c.classList.add('is-in'));
        return;
      }
      const io = new IntersectionObserver((entries, obs)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            const i = [...cards].indexOf(e.target);
            e.target.style.transitionDelay = Math.min(i*70, 300) + 'ms';
            e.target.classList.add('is-in');
            obs.unobserve(e.target);
          }
        });
      }, {threshold:.15});
      cards.forEach(c => io.observe(c));
    })();
  </script>
</section>

<!-- TEAM (Carousel, "Meet Our Experts" style) -->
<!-- TEAM (Carousel, "Meet Our Experts" style) -->
<section class="section bg-white">
  <div class="container">
    <header class="text-center mb-10">
      <p class="inline-block text-sm font-medium text-gray-600 bg-gray-100 rounded-full px-4 py-1">
        Meet Our Experts
      </p>
      <h2 class="text-2xl md:text-3xl font-bold mt-4 tracking-tight text-gray-900">
        Personalized Guidance,<br class="hidden sm:block"> Proven Expertise
      </h2>
    </header>

    <style>
      .carousel-wrap { position: relative; display: flex; align-items: center; }
      .carousel {
        display: flex; gap: 1.25rem;
        overflow-x: auto; padding: .5rem 0; width: 100%;
        scroll-snap-type: x mandatory; scrollbar-width: none;
        -webkit-overflow-scrolling: touch;
      }
      .carousel::-webkit-scrollbar { display: none; }

      .slide { flex: 0 0 80%; max-width: 80%; scroll-snap-align: center; }
      @media (min-width: 768px) { .slide { flex-basis: 40%; max-width: 40%; } }
      @media (min-width: 1024px){ .slide { flex-basis: 25%; max-width: 25%; } }

      .team-card { display: flex; flex-direction: column; height: 100%; }
      .team-photo-wrap {
        position: relative; border-radius: 1rem; overflow: hidden;
        aspect-ratio: 4 / 5; background: #f5f5f5;
      }
      .team-photo {
        width: 100%; height: 100%; object-fit: cover; display: block;
        transition: transform .25s cubic-bezier(.22,1,.36,1), box-shadow .25s;
      }
      .team-card:hover .team-photo { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(0,0,0,.12); }
      .team-meta { margin-top: .85rem; text-align: center; }
      .team-name { font-weight: 700; font-size: 1.05rem; color: #111; line-height: 1.25; }
      .team-role { margin-top: .25rem; color: #667085; font-size: .95rem; }

      #expertsCarousel { scroll-snap-type: none !important; }
      .team-link { text-decoration: none; color: inherit; }
      .team-link:focus-visible { outline: 2px solid #111; outline-offset: 4px; border-radius: 12px; }
    </style>

    <div class="carousel-wrap">
      <div class="carousel" id="expertsCarousel" aria-label="Experts carousel" tabindex="0">
        {% for p in leaders %}
        <article class="slide team-card">
          {% if p.url %}
            <a class="team-link" href="{{ p.url }}" aria-label="{{ p.name }} profile">
          {% else %}
            <div class="team-link" aria-label="{{ p.name }}">
          {% endif %}

            <div class="team-photo-wrap">
              {% if p.photo_card %}
                <img
                  class="team-photo"
                  src="{{ p.photo_card }}"
                  alt="{{ p.name }}"
                  loading="lazy"
                  referrerpolicy="no-referrer"
                  width="800" height="1000"
                  sizes="(max-width: 640px) 80vw, (max-width: 1024px) 40vw, 25vw"
                  onerror="this.onerror=null;this.src='https://picsum.photos/800/1000?grayscale&blur=0';">
              {% elif p.photo %}
                <img
                  class="team-photo"
                  src="{{ p.photo }}"
                  alt="{{ p.name }}"
                  loading="lazy"
                  referrerpolicy="no-referrer"
                  width="800" height="1000"
                  sizes="(max-width: 640px) 80vw, (max-width: 1024px) 40vw, 25vw"
                  onerror="this.onerror=null;this.src='https://picsum.photos/800/1000?grayscale&blur=0';">
              {% else %}
                <img
                  class="team-photo"
                  src="https://picsum.photos/800/1000?grayscale&blur=0"
                  alt="{{ p.name }}"
                  loading="lazy"
                  width="800" height="1000">
              {% endif %}
            </div>

            <div class="team-meta">
              <h3 class="team-name">{{ p.name }}</h3>
              <p class="team-role">{{ p.role }}</p>
            </div>

          {% if p.url %}</a>{% else %}</div>{% endif %}
        </article>
        {% empty %}
          {% for i in "1,2,3,4,5"|cut:"," %}
          <article class="slide team-card">
            <div class="team-photo-wrap">
              <img class="team-photo" src="https://picsum.photos/800/1000?random={{ forloop.counter }}" alt="Expert">
            </div>
            <div class="team-meta">
              <h3 class="team-name">Expert {{ forloop.counter }}</h3>
              <p class="team-role">Specialist</p>
            </div>
          </article>
          {% endfor %}
        {% endfor %}
      </div>
    </div>

    <script>
    (function(){
      const rail = document.getElementById('expertsCarousel');
      if(!rail) return;

      let speed = 0.6, rafId = null, baseWidth = 0, isTouching = false;

      rail.addEventListener('wheel', (e)=>{
        if(Math.abs(e.deltaY) > Math.abs(e.deltaX)){
          rail.scrollLeft += e.deltaY * 0.85;
          e.preventDefault();
        }
      }, {passive:false});

      rail.addEventListener('touchstart', ()=>{ isTouching = true; stop(); }, {passive:true});
      rail.addEventListener('touchend',   ()=>{ isTouching = false; start(); }, {passive:true});
      rail.addEventListener('pointerdown', ()=>{ isTouching = true; stop(); });
      rail.addEventListener('pointerup',   ()=>{ isTouching = false; start(); });

      function buildClones(){
        stop();
        [...rail.querySelectorAll('[data-clone="1"]')].forEach(n => n.remove());

        const slides = [...rail.children];
        if(slides.length === 0) return;

        rail.scrollLeft = 0;
        const styles = getComputedStyle(rail);
        const gap = parseFloat(styles.columnGap || styles.gap || 0);
        baseWidth = slides.reduce((w, el) => w + el.getBoundingClientRect().width, 0) + gap * (slides.length - 1);

        const needWidth = Math.max(rail.clientWidth * 2.2, baseWidth * 2);
        let acc = baseWidth;
        while(acc < needWidth){
          slides.forEach(s => {
            const c = s.cloneNode(true);
            c.setAttribute('data-clone','1');
            c.querySelectorAll('[id]').forEach(el => el.removeAttribute('id'));
            rail.appendChild(c);
          });
          acc += baseWidth;
        }
        start();
      }

      function step(){
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
        if (isTouching) return;
        rail.scrollLeft += speed;
        if(rail.scrollLeft >= baseWidth){
          rail.scrollLeft -= baseWidth;
        }
        rafId = requestAnimationFrame(step);
      }
      function start(){ if(!rafId) rafId = requestAnimationFrame(step); }
      function stop(){ cancelAnimationFrame(rafId); rafId = null; }

      rail.addEventListener('mouseenter', stop);
      rail.addEventListener('mouseleave', start);
      rail.addEventListener('focusin', stop);
      rail.addEventListener('focusout', start);

      let t; window.addEventListener('resize', () => { clearTimeout(t); t = setTimeout(buildClones, 150); });

      buildClones();

      const ds = parseFloat(rail.dataset.speed || '');
      if(!Number.isNaN(ds)) speed = ds;
    })();
    </script>
  </div>
</section>


<!-- ========================= TIMELINE ========================= -->
<section class="relative bg-gray-50 text-gray-900 overflow-hidden py-16">
  <div class="max-w-6xl mx-auto px-6 lg:px-8">
    <div class="text-center mb-12">
      <p class="text-sm uppercase tracking-wide text-gray-500">Our Journey</p>
      <h2 class="text-3xl font-bold">A legacy of growth and innovation</h2>
      <p class="mt-2 text-gray-600 max-w-2xl mx-auto">
        Year by year, we expanded from core maintenance to full-spectrum build, operations, and tech solutions.
      </p>
    </div>

    <!-- Timeline -->
    <div class="grid grid-cols-1 md:grid-cols-7 gap-8 text-center relative">
      <!-- Connector line (desktop) -->
      <div class="absolute top-8 left-0 w-full h-0.5 bg-gray-200 hidden md:block"></div>

      <!-- 2019 -->
      <div class="relative">
        <div class="w-4 h-4 bg-teal-500 rounded-full mx-auto mb-6 border-4 border-white relative z-10"></div>
        <h3 class="text-xl font-semibold">2019</h3>
        <p class="text-sm uppercase text-gray-500">Foundation</p>
        <p class="mt-4 text-gray-600">
          Established the company, specializing in professional maintenance services.
        </p>
      </div>

      <!-- 2020 -->
      <div class="relative">
        <div class="w-4 h-4 bg-teal-500 rounded-full mx-auto mb-6 border-4 border-white relative z-10"></div>
        <h3 class="text-xl font-semibold">2020</h3>
        <p class="text-sm uppercase text-gray-500">Landscape</p>
        <p class="mt-4 text-gray-600">
          Introduced the Landscaping division to broaden our service range.
        </p>
      </div>

      <!-- 2021 -->
      <div class="relative">
        <div class="w-4 h-4 bg-teal-500 rounded-full mx-auto mb-6 border-4 border-white relative z-10"></div>
        <h3 class="text-xl font-semibold">2021</h3>
        <p class="text-sm uppercase text-gray-500">Interiors</p>
        <p class="mt-4 text-gray-600">
          Launched Interior Fit-Out services to deliver complete space solutions.
        </p>
      </div>

      <!-- 2022 -->
      <div class="relative">
        <div class="w-4 h-4 bg-teal-500 rounded-full mx-auto mb-6 border-4 border-white relative z-10"></div>
        <h3 class="text-xl font-semibold">2022</h3>
        <p class="text-sm uppercase text-gray-500">Facilities</p>
        <p class="mt-4 text-gray-600">
          Expanded into Facilities Management for integrated property services.
        </p>
      </div>

      <!-- 2023 -->
      <div class="relative">
        <div class="w-4 h-4 bg-teal-500 rounded-full mx-auto mb-6 border-4 border-white relative z-10"></div>
        <h3 class="text-xl font-semibold">2023</h3>
        <p class="text-sm uppercase text-gray-500">Joinery</p>
        <p class="mt-4 text-gray-600">
          Set up an in-house Joinery Workshop to support customized joinery finishing.
        </p>
      </div>

      <!-- 2024 -->
      <div class="relative">
        <div class="w-4 h-4 bg-teal-500 rounded-full mx-auto mb-6 border-4 border-white relative z-10"></div>
        <h3 class="text-xl font-semibold">2024</h3>
        <p class="text-sm uppercase text-gray-500">Construction</p>
        <p class="mt-4 text-gray-600">
          Formed Hammer Group and commenced high-end villa construction.
        </p>
      </div>

      <!-- 2025 -->
      <div class="relative">
        <div class="w-4 h-4 bg-teal-500 rounded-full mx-auto mb-6 border-4 border-white relative z-10"></div>
        <h3 class="text-xl font-semibold">2025</h3>
        <p class="text-sm uppercase text-gray-500">Innovation</p>
        <p class="mt-4 text-gray-600">
          Introduced Automated Solutions through a strategic tech partnership.
        </p>
      </div>
    </div>
  </div>
</section>


{% include "partials/cta_slim.html" %}
{% include "partials/partners.html" %}





{% include "partials/contact.html" %}

<script>
  // Leaders carousel controls (mouse, keys, touch already via native scroll)
  (function(){
    const wrap = document.getElementById('leadersCarousel');
    const prev = document.getElementById('leadersPrev');
    const next = document.getElementById('leadersNext');
    if(!wrap || !prev || !next) return;

    function step(dir){
      const w = wrap.clientWidth;
      wrap.scrollBy({left: dir * (w * 0.85), behavior:'smooth'});
    }
    prev.addEventListener('click', ()=> step(-1));
    next.addEventListener('click', ()=> step(1));

    // Keyboard accessibility
    wrap.setAttribute('tabindex','0');
    wrap.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowRight') step(1);
      if(e.key === 'ArrowLeft') step(-1);
    });
  })();
</script>

{% endblock %}
