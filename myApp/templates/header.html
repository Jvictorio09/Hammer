{# templates/header.html #}
<style>
/* Desktop-only visibility guard (keeps it gone on mobile/tablet) */
@media (max-width: 1023px){
  header .desktop-cta{ display:none !important; }
}

/* Quiet-luxury CTA */
.cta-pill{
  height:44px; padding:0 18px; border-radius:9999px;
  background: linear-gradient(180deg,#19BDB8 0%, #119E9A 100%);
  color:#fff; font-weight:600; letter-spacing:.2px;
  border:1px solid rgba(255,255,255,.35);
  box-shadow:
    0 10px 28px -14px rgba(17,158,154,.65),
    inset 0 1px 0 rgba(255,255,255,.35);
  -webkit-font-smoothing:antialiased;
  transition: transform .18s ease, box-shadow .28s ease, filter .2s ease, background .2s ease;
}

.cta-pill:hover{
  transform: translateY(-1px);
  box-shadow:
    0 16px 36px -14px rgba(17,158,154,.70),
    inset 0 1px 0 rgba(255,255,255,.45);
  filter: saturate(1.05);
}

.cta-pill:active{
  transform: translateY(0);
  box-shadow: 0 8px 20px -12px rgba(17,158,154,.55);
}

.cta-pill:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 3px rgba(24,175,171,.22),
    0 12px 32px -14px rgba(17,158,154,.65),
    inset 0 1px 0 rgba(255,255,255,.45);
}

/* Icon chip: subtle glass + border for a premium feel */
.cta-icon{
  display:grid; place-items:center;
  width:28px; height:28px; border-radius:9999px;
  background: rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.35);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.45);
}

/* Dark-mode polish (optional) */
@media (prefers-color-scheme: dark){
  .cta-pill{
    border-color: rgba(255,255,255,.25);
    box-shadow:
      0 10px 28px -14px rgba(0,0,0,.55),
      inset 0 1px 0 rgba(255,255,255,.25);
  }
  .cta-icon{
    background: rgba(255,255,255,.10);
    border-color: rgba(255,255,255,.25);
  }
}

/* Respect users who dislike motion */
@media (prefers-reduced-motion: reduce){
  .cta-pill{ transition: none; }
}
</style>

<header class="fixed top-0 inset-x-0 z-50 bg-white/80 backdrop-blur-md border-b border-black/5">
  <div class="max-w-7xl mx-auto px-6 py-2 flex items-center justify-between" style="min-height: 72px;">
    <a href="{% url 'home' %}" class="flex items-center">
      <img src="https://res.cloudinary.com/dstlxtvar/image/upload/v1759923995/Hammer_Logo13_drxh0j.png" 
           alt="Hammer Group" 
           class="h-16 w-auto">
    </a>

    <!-- Desktop nav -->
    <nav class="hidden md:flex items-center gap-6 font-medium">
      <a href="{% url 'home' %}" class="{% if request.path == '/' %}text-hammer-gold{% else %}hover:text-hammer-gold{% endif %}">
        Home
      </a>

      <!-- Services dropdown -->
      <div class="relative">
        <button
          id="servicesToggle"
          type="button"
          class="inline-flex items-center gap-1 {% if request.path|slice:':10' == '/services/' %}text-hammer-gold{% else %}hover:text-hammer-gold{% endif %}"
          aria-haspopup="true"
          aria-expanded="false"
          aria-controls="servicesMenu">
          <span>Services</span>
          <i class="fa-solid fa-chevron-down text-[11px] mt-[1px]"></i>
        </button>

        <!-- Panel -->
        <div
          id="servicesMenu"
          class="hidden absolute left-0 mt-3 w-80 rounded-xl border border-black/10 bg-white shadow-xl z-50"
          role="menu"
          aria-labelledby="servicesToggle">
          <ul class="py-2" role="none">
            {% if nav_services %}
              {% for s in nav_services %}
                <li role="none">
                  <a href="{% url nav_detail_urlname|default:'service_detail' s.slug %}"
                     class="block px-4 py-2.5 focus:outline-none hover:bg-gray-50 focus:bg-gray-50 {% if nav_current_slug == s.slug %}text-hammer-gold{% endif %}"
                     role="menuitem" tabindex="-1">
                    <span class="block text-sm font-semibold">{{ s.title }}</span>
                    {% if s.eyebrow %}
                      <span class="block text-xs text-gray-500 mt-0.5">{{ s.eyebrow }}</span>
                    {% endif %}
                  </a>
                </li>
              {% endfor %}
            {% else %}
              <li role="none">
                <span class="block px-4 py-2.5 text-sm text-gray-500">No services yet</span>
              </li>
            {% endif %}
          </ul>

          <div class="border-t border-gray-100 px-4 py-2.5">
            <a href="{% url nav_index_urlname|default:'service_index' %}"
               class="text-sm font-semibold text-[#18AFAB] hover:opacity-80"
               role="menuitem" tabindex="-1">
              View all services <i class="fa-solid fa-arrow-right-long ml-1"></i>
            </a>
          </div>
        </div>
      </div>

      <a href="{% url 'projects_index' %}" class="hover:text-hammer-gold">Projects</a>
      <a href="{% url 'about' %}" class="hover:text-hammer-gold">About</a>
      <a href="{% url 'contact' %}" class="hover:text-hammer-gold">Contact</a>
    </nav>

    <!-- Desktop CTA (desktop only, hidden on mobile & tablet) -->
    <a href="{% url 'contact' %}"
   class="desktop-cta hidden lg:inline-flex items-center gap-3 cta-pill"
   aria-label="Request Consultation">
  <span class="cta-icon" aria-hidden="true">
    <i class="fa-regular fa-envelope text-[14px]"></i>
  </span>
  <span>Request Consultation</span>
</a>


    <!-- Mobile menu toggle -->
    <button class="md:hidden text-2xl" aria-label="Menu" id="navToggle">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>

  <!-- Mobile drawer -->
  <div id="mobileNav"
       class="md:hidden max-h-0 overflow-hidden transition-[max-height] duration-300 bg-white border-t border-black/5">
    <nav class="px-6 py-3 space-y-2">
      <a href="{% url 'home' %}" class="block py-2">Home</a>

      <!-- Services accordion -->
      <details class="group">
        <summary class="flex items-center justify-between py-2 cursor-pointer">
          <span>Services</span>
          <i class="fa-solid fa-chevron-down text-[12px] transition group-open:rotate-180"></i>
        </summary>
        <ul class="pl-3 border-l border-gray-100">
          {% if nav_services %}
            {% for s in nav_services %}
              <li>
                <a href="{% url nav_detail_urlname|default:'service_detail' s.slug %}" class="block py-2 text-sm">
                  {{ s.title }}
                </a>
              </li>
            {% endfor %}
          {% else %}
            <li class="py-2 text-sm text-gray-500">No services yet</li>
          {% endif %}
          <li class="py-2">
            <a href="{% url nav_index_urlname|default:'service_index' %}" class="text-sm font-semibold text-[#18AFAB]">
              View all services
            </a>
          </li>
        </ul>
      </details>

      <a href="{% url 'projects_index' %}" class="block py-2">Projects</a>
      <a href="{% url 'about' %}" class="block py-2">About</a>
      <a href="{% url 'contact' %}" class="block py-2">Contact</a>

      {# ðŸš« Removed "Request Consultation" from mobile drawer #}
    </nav>
  </div>
</header>

<style>
/* Force hide header CTA in mobile & tablet */
@media (max-width: 1023px){
  header .desktop-cta {
    display: none !important;
  }
}
</style>

<script>
  // mobile drawer toggle
  (function () {
    const btn = document.getElementById('navToggle');
    const panel = document.getElementById('mobileNav');
    if (!btn || !panel) return;
    let open = false;
    btn.addEventListener('click', () => {
      open = !open;
      panel.style.maxHeight = open ? panel.scrollHeight + 'px' : '0px';
    });
    panel.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', () => { open = false; panel.style.maxHeight = '0px'; });
    });
  })();

  // services dropdown (desktop)
  (function () {
    const toggle = document.getElementById('servicesToggle');
    const menu   = document.getElementById('servicesMenu');
    if (!toggle || !menu) return;

    const open = () => { menu.classList.remove('hidden'); toggle.setAttribute('aria-expanded','true'); };
    const close = () => { menu.classList.add('hidden'); toggle.setAttribute('aria-expanded','false'); };
    const isOpen = () => !menu.classList.contains('hidden');

    toggle.addEventListener('click', (e) => {
      e.stopPropagation();
      isOpen() ? close() : open();
    });

    document.addEventListener('click', (e) => {
      if (isOpen() && !menu.contains(e.target) && !toggle.contains(e.target)) close();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && isOpen()) close();
    });
  })();
</script>
